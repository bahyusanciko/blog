{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DiscussionEmbed = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar callbacks = ['preData', 'preInit', 'onInit', 'onReady', 'afterRender', 'preReset', 'onIdentify', 'beforeComment', 'onNewComment', 'onPaginate'];\n\nvar DiscussionEmbed = exports.DiscussionEmbed = function (_React$Component) {\n  _inherits(DiscussionEmbed, _React$Component);\n\n  function DiscussionEmbed() {\n    _classCallCheck(this, DiscussionEmbed);\n\n    return _possibleConstructorReturn(this, (DiscussionEmbed.__proto__ || Object.getPrototypeOf(DiscussionEmbed)).apply(this, arguments));\n  }\n\n  _createClass(DiscussionEmbed, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (typeof window !== 'undefined' && window.disqus_shortname && window.disqus_shortname !== this.props.shortname) this.cleanInstance();\n      this.loadInstance();\n    }\n  }, {\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate(nextProps) {\n      if (this.props === nextProps) return false;\n      return (0, _utils.shallowComparison)(this.props, nextProps);\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(nextProps) {\n      if (this.props.shortname !== nextProps.shortname) this.cleanInstance();\n      this.loadInstance();\n    }\n  }, {\n    key: 'loadInstance',\n    value: function loadInstance() {\n      var doc = window.document;\n\n      if (window && window.DISQUS && doc.getElementById('dsq-embed-scr')) {\n        window.DISQUS.reset({\n          reload: true,\n          config: this.getDisqusConfig(this.props.config)\n        });\n      } else {\n        window.disqus_config = this.getDisqusConfig(this.props.config);\n        window.disqus_shortname = this.props.shortname;\n        (0, _utils.insertScript)('https://' + this.props.shortname + '.disqus.com/embed.js', 'dsq-embed-scr', doc.body);\n      }\n    }\n  }, {\n    key: 'cleanInstance',\n    value: function cleanInstance() {\n      var doc = window.document;\n      (0, _utils.removeScript)('dsq-embed-scr', doc.body);\n      if (window && window.DISQUS) window.DISQUS.reset({});\n\n      try {\n        delete window.DISQUS;\n      } catch (error) {\n        window.DISQUS = undefined;\n      }\n\n      var disqusThread = doc.getElementById('disqus_thread');\n\n      if (disqusThread) {\n        while (disqusThread.hasChildNodes()) {\n          disqusThread.removeChild(disqusThread.firstChild);\n        }\n      }\n    }\n  }, {\n    key: 'getDisqusConfig',\n    value: function getDisqusConfig(config) {\n      return function () {\n        var _this2 = this;\n\n        this.page.identifier = config.identifier;\n        this.page.url = config.url;\n        this.page.title = config.title;\n        this.page.remote_auth_s3 = config.remoteAuthS3;\n        this.page.api_key = config.apiKey;\n        callbacks.forEach(function (callbackName) {\n          _this2.callbacks[callbackName] = [config[callbackName]];\n        });\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement('div', _extends({}, this.props, {\n        id: 'disqus_thread'\n      }));\n    }\n  }]);\n\n  return DiscussionEmbed;\n}(_react2.default.Component);\n\nDiscussionEmbed.propTypes = {\n  shortname: _propTypes2.default.string.isRequired,\n  config: _propTypes2.default.shape({\n    identifier: _propTypes2.default.string,\n    url: _propTypes2.default.string,\n    title: _propTypes2.default.string,\n    preData: _propTypes2.default.func,\n    preInit: _propTypes2.default.func,\n    onInit: _propTypes2.default.func,\n    onReady: _propTypes2.default.func,\n    afterRender: _propTypes2.default.func,\n    preReset: _propTypes2.default.func,\n    onIdentify: _propTypes2.default.func,\n    beforeComment: _propTypes2.default.func,\n    onNewComment: _propTypes2.default.func,\n    onPaginate: _propTypes2.default.func\n  }).isRequired\n};","map":{"version":3,"sources":["/Users/bahyusanciko/Documents/ionic/blog/node_modules/disqus-react/lib/DiscussionEmbed.js"],"names":["Object","defineProperty","exports","value","DiscussionEmbed","undefined","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_utils","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","callbacks","_React$Component","getPrototypeOf","apply","componentDidMount","window","disqus_shortname","shortname","cleanInstance","loadInstance","shouldComponentUpdate","nextProps","shallowComparison","componentDidUpdate","doc","document","DISQUS","getElementById","reset","reload","config","getDisqusConfig","disqus_config","insertScript","body","removeScript","error","disqusThread","hasChildNodes","removeChild","firstChild","_this2","page","identifier","url","title","remote_auth_s3","remoteAuthS3","api_key","apiKey","forEach","callbackName","render","createElement","id","Component","propTypes","string","isRequired","shape","preData","func","preInit","onInit","onReady","afterRender","preReset","onIdentify","beforeComment","onNewComment","onPaginate"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.DiscussionEmbed = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar callbacks = ['preData', 'preInit', 'onInit', 'onReady', 'afterRender', 'preReset', 'onIdentify', 'beforeComment', 'onNewComment', 'onPaginate'];\n\nvar DiscussionEmbed = exports.DiscussionEmbed = function (_React$Component) {\n    _inherits(DiscussionEmbed, _React$Component);\n\n    function DiscussionEmbed() {\n        _classCallCheck(this, DiscussionEmbed);\n\n        return _possibleConstructorReturn(this, (DiscussionEmbed.__proto__ || Object.getPrototypeOf(DiscussionEmbed)).apply(this, arguments));\n    }\n\n    _createClass(DiscussionEmbed, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            if (typeof window !== 'undefined' && window.disqus_shortname && window.disqus_shortname !== this.props.shortname) this.cleanInstance();\n            this.loadInstance();\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps) {\n            if (this.props === nextProps) return false;\n            return (0, _utils.shallowComparison)(this.props, nextProps);\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(nextProps) {\n            if (this.props.shortname !== nextProps.shortname) this.cleanInstance();\n            this.loadInstance();\n        }\n    }, {\n        key: 'loadInstance',\n        value: function loadInstance() {\n            var doc = window.document;\n            if (window && window.DISQUS && doc.getElementById('dsq-embed-scr')) {\n                window.DISQUS.reset({\n                    reload: true,\n                    config: this.getDisqusConfig(this.props.config)\n                });\n            } else {\n                window.disqus_config = this.getDisqusConfig(this.props.config);\n                window.disqus_shortname = this.props.shortname;\n                (0, _utils.insertScript)('https://' + this.props.shortname + '.disqus.com/embed.js', 'dsq-embed-scr', doc.body);\n            }\n        }\n    }, {\n        key: 'cleanInstance',\n        value: function cleanInstance() {\n            var doc = window.document;\n            (0, _utils.removeScript)('dsq-embed-scr', doc.body);\n            if (window && window.DISQUS) window.DISQUS.reset({});\n\n            try {\n                delete window.DISQUS;\n            } catch (error) {\n                window.DISQUS = undefined;\n            }\n            var disqusThread = doc.getElementById('disqus_thread');\n            if (disqusThread) {\n                while (disqusThread.hasChildNodes()) {\n                    disqusThread.removeChild(disqusThread.firstChild);\n                }\n            }\n        }\n    }, {\n        key: 'getDisqusConfig',\n        value: function getDisqusConfig(config) {\n            return function () {\n                var _this2 = this;\n\n                this.page.identifier = config.identifier;\n                this.page.url = config.url;\n                this.page.title = config.title;\n                this.page.remote_auth_s3 = config.remoteAuthS3;\n                this.page.api_key = config.apiKey;\n\n                callbacks.forEach(function (callbackName) {\n                    _this2.callbacks[callbackName] = [config[callbackName]];\n                });\n            };\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return _react2.default.createElement('div', _extends({}, this.props, { id: 'disqus_thread' }));\n        }\n    }]);\n\n    return DiscussionEmbed;\n}(_react2.default.Component);\n\nDiscussionEmbed.propTypes = {\n    shortname: _propTypes2.default.string.isRequired,\n    config: _propTypes2.default.shape({\n        identifier: _propTypes2.default.string,\n        url: _propTypes2.default.string,\n        title: _propTypes2.default.string,\n        preData: _propTypes2.default.func,\n        preInit: _propTypes2.default.func,\n        onInit: _propTypes2.default.func,\n        onReady: _propTypes2.default.func,\n        afterRender: _propTypes2.default.func,\n        preReset: _propTypes2.default.func,\n        onIdentify: _propTypes2.default.func,\n        beforeComment: _propTypes2.default.func,\n        onNewComment: _propTypes2.default.func,\n        onPaginate: _propTypes2.default.func\n    }).isRequired\n};"]},"metadata":{},"sourceType":"script"}